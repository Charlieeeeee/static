<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div>这是 A 页面.</div>
    <button onclick="toB()">点击打开 B 页面</button>
    <script>
        console.log("come into page A")

        // 设置页面名
        window.name = 'A'

        function toB() {
            // 打开新页面并设置页面名
            window.open("B.html", "B")
        }

        //  1) 页面正常关闭

        // 方案一、
        // 监听 hash
        // window.addEventListener('hashchange', (e) => {
        //     console.log(e)
        //     const hash = window.location.hash
        //     if (hash === "#close") {
        //         alert(hash);
        //         location.href = location.href.replace(hash, "#")
        //     }
        // }, false);

        // 方案二、
        window.addEventListener("storage", function (e) {
            // 监听 storage
            alert(e.newValue);
        }, false);
    </script>
</body>

</html>